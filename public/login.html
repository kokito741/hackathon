<!DOCTYPE html>
<html>
<body>
<h2>Login</h2>
<form id="f">
  <input name="email" placeholder="Email"><br>
  <input name="password" type="password" placeholder="Password"><br>
  <button type="submit">Login</button>
</form>

<!-- Register button -->
<button id="registerBtn">Register</button>

<script>
const form = document.getElementById('f');
form.onsubmit = async e => {
  e.preventDefault();
  const f = e.target;
  const res = await fetch('/api/auth/login', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({email: f.email.value, password: f.password.value})
  });
  const data = await res.json();
  if(data.token){
    localStorage.setItem('token', data.token);
    location.href = '/home';
  } else alert(data.error);
};

// Register button click
document.getElementById('registerBtn').onclick = () => {
  location.href = '/register';
};
</script>
</body>
</html>
